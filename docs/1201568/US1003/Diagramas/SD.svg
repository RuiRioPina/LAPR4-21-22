<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1083px" preserveAspectRatio="none" style="width:2888px;height:1083px;background:#FFFFFF;" version="1.1" viewBox="0 0 2888 1083" width="2888px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="902.3438" style="stroke:#181818;stroke-width:1.0;" width="10" x="55.5" y="91.2969"/><rect fill="#FFFFFF" height="893.3438" style="stroke:#181818;stroke-width:1.0;" width="10" x="539.5" y="91.2969"/><rect fill="#FFFFFF" height="549.75" style="stroke:#181818;stroke-width:1.0;" width="10" x="1158.5" y="405.7578"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1439" y="610.7188"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2049" y="926.375"/><rect fill="#FFFFFF" height="72.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="2276.5" y="737.25"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="2534" y="838.9766"/><rect fill="#FFFFFF" height="513.6172" style="stroke:#181818;stroke-width:1.0;" width="10" x="2856" y="480.0234"/><rect height="75.3984" style="stroke:#000000;stroke-width:1.5;fill:none;" width="647.5" x="10" y="302.2266"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="60" x2="60" y1="81.2969" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="544.5" x2="544.5" y1="81.2969" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1163.5" x2="1163.5" y1="81.2969" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1443.5" x2="1443.5" y1="479.5391" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2054" x2="2054" y1="81.2969" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2281" x2="2281" y1="736.7656" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2539" x2="2539" y1="778.0625" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2746" x2="2746" y1="81.2969" y2="1002.6406"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2861" x2="2861" y1="81.2969" y2="1002.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="20" y="77.9951">SalesClerk</text><ellipse cx="60.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60.5,21.5 L60.5,48.5 M47.5,29.5 L73.5,29.5 M60.5,48.5 L47.5,63.5 M60.5,48.5 L73.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="20" y="1014.6357">SalesClerk</text><ellipse cx="60.5" cy="1026.4375" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M60.5,1034.4375 L60.5,1061.4375 M47.5,1042.4375 L73.5,1042.4375 M60.5,1061.4375 L47.5,1076.4375 M60.5,1061.4375 L73.5,1076.4375 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="441.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="448.5" y="69.9951">AddUserUI &lt;presentation&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206" x="441.5" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192" x="448.5" y="1021.6357">AddUserUI &lt;presentation&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="330" x="998.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="316" x="1005.5" y="69.9951">:RegisterCustomerController &lt;application&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="330" x="998.5" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="316" x="1005.5" y="1021.6357">:RegisterCustomerController &lt;application&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="1338.5" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="1345.5" y="1021.6357">:CustomerBuilder&lt;builder&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="1971" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="1978" y="69.9951">:Customer&lt;Domain&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="1971" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="152" x="1978" y="1021.6357">:Customer&lt;Domain&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="269" x="2147" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255" x="2154" y="1021.6357">:PersistenceContext&lt;persistence&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="226" x="2426" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="2433" y="1021.6357">:RepositoryFactory&lt;factory&gt;</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="2662" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="2669" y="69.9951">:CustomerRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="168" x="2662" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="2669" y="1021.6357">:CustomerRepository</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="2840" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="2847" y="69.9951">REP</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="42" x="2840" y="1001.6406"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="28" x="2847" y="1021.6357">REP</text><rect fill="#FFFFFF" height="902.3438" style="stroke:#181818;stroke-width:1.0;" width="10" x="55.5" y="91.2969"/><rect fill="#FFFFFF" height="893.3438" style="stroke:#181818;stroke-width:1.0;" width="10" x="539.5" y="91.2969"/><rect fill="#FFFFFF" height="549.75" style="stroke:#181818;stroke-width:1.0;" width="10" x="1158.5" y="405.7578"/><rect fill="#FFFFFF" height="87.3984" style="stroke:#181818;stroke-width:1.0;" width="10" x="1439" y="610.7188"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="2049" y="926.375"/><rect fill="#FFFFFF" height="72.5938" style="stroke:#181818;stroke-width:1.0;" width="10" x="2276.5" y="737.25"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="2534" y="838.9766"/><rect fill="#FFFFFF" height="513.6172" style="stroke:#181818;stroke-width:1.0;" width="10" x="2856" y="480.0234"/><polygon fill="#181818" points="527.5,108.4297,537.5,112.4297,527.5,116.4297,531.5,112.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65.5" x2="533.5" y1="112.4297" y2="112.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="72.5" y="107.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="197" x="85.5" y="107.3638">Add Customer Option Selected</text><polygon fill="#181818" points="76.5,137.5625,66.5,141.5625,76.5,145.5625,72.5,141.5625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70.5" x2="538.5" y1="141.5625" y2="141.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="82.5" y="136.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182" x="95.5" y="136.4966">asks customer's information</text><polygon fill="#181818" points="527.5,166.6953,537.5,170.6953,527.5,174.6953,531.5,170.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65.5" x2="533.5" y1="170.6953" y2="170.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="8" x="72.5" y="165.6294">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="84.5" y="165.6294">name, VAT, email</text><polygon fill="#181818" points="76.5,195.8281,66.5,199.8281,76.5,203.8281,72.5,199.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70.5" x2="538.5" y1="199.8281" y2="199.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="82.5" y="194.7622">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="95.5" y="194.7622">asks VAT</text><polygon fill="#181818" points="527.5,224.9609,537.5,228.9609,527.5,232.9609,531.5,228.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65.5" x2="533.5" y1="228.9609" y2="228.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="72.5" y="223.895">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="85.5" y="223.895">introduces VAT</text><polygon fill="#181818" points="76.5,254.0938,66.5,258.0938,76.5,262.0938,72.5,258.0938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70.5" x2="538.5" y1="258.0938" y2="258.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="82.5" y="253.0278">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="68" x="95.5" y="253.0278">asks email</text><polygon fill="#181818" points="527.5,283.2266,537.5,287.2266,527.5,291.2266,531.5,287.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65.5" x2="533.5" y1="287.2266" y2="287.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="72.5" y="282.1606">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106" x="85.5" y="282.1606">introduces email</text><path d="M10,302.2266 L76,302.2266 L76,309.3594 L66,319.3594 L10,319.3594 L10,302.2266 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="647.5" x="10" y="302.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="315.2935">alt</text><polygon fill="#181818" points="76.5,336.4922,66.5,340.4922,76.5,344.4922,72.5,340.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70.5" x2="538.5" y1="340.4922" y2="340.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="82.5" y="335.4263">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237" x="95.5" y="335.4263">asks customer's optional information</text><polygon fill="#181818" points="527.5,365.625,537.5,369.625,527.5,373.625,531.5,369.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="65.5" x2="533.5" y1="369.625" y2="369.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="72.5" y="364.5591">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="437" x="85.5" y="364.5591">mobile phone number, birthdate, gender, address (billing, shipment)</text><polygon fill="#181818" points="1146.5,401.7578,1156.5,405.7578,1146.5,409.7578,1150.5,405.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="549.5" x2="1152.5" y1="405.7578" y2="405.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="556.5" y="400.6919">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="567" x="579.5" y="400.6919">registerCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)</text><path d="M1218,418.7578 L1218,443.7578 L1670,443.7578 L1670,428.7578 L1660,418.7578 L1218,418.7578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1660,418.7578 L1660,428.7578 L1670,428.7578 L1660,418.7578 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431" x="1224" y="435.8247">CustomerBuilder cria entidade do tipo Customer num estado válido</text><polygon fill="#181818" points="1326.5,466.0234,1336.5,470.0234,1326.5,474.0234,1330.5,470.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1168.5" x2="1332.5" y1="470.0234" y2="470.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1175.5" y="464.9575">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="1197.5" y="464.9575">create</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="1338.5" y="448.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="1345.5" y="468.8857">:CustomerBuilder&lt;builder&gt;</text><polygon fill="#181818" points="1432,507.3203,1442,511.3203,1432,515.3203,1436,511.3203" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1168.5" x2="1438" y1="511.3203" y2="511.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1175.5" y="506.2544">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="1197.5" y="506.2544">setName(name)</text><path d="M1030,524.3203 L1030,549.3203 L1576,549.3203 L1576,534.3203 L1566,524.3203 L1030,524.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1566,524.3203 L1566,534.3203 L1576,534.3203 L1566,524.3203 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="1199" y="541.3872">Set the  rest of the information</text><path d="M1957,559.4531 L1957,584.4531 L2151,584.4531 L2151,569.4531 L2141,559.4531 L1957,559.4531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M2141,559.4531 L2141,569.4531 L2151,569.4531 L2141,559.4531 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="1963" y="576.52">domain rules checked here</text><polygon fill="#181818" points="1427,606.7188,1437,610.7188,1427,614.7188,1431,610.7188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1168.5" x2="1433" y1="610.7188" y2="610.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1175.5" y="605.6528">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1196.5" y="605.6528">createCustomer()</text><polygon fill="#181818" points="2042,635.8516,2052,639.8516,2042,643.8516,2046,639.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1449" x2="2048" y1="639.8516" y2="639.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1456" y="634.7856">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="559" x="1478" y="634.7856">createCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)</text><polygon fill="#181818" points="1460,664.9844,1450,668.9844,1460,672.9844,1456,668.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1454" x2="2053" y1="668.9844" y2="668.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1466" y="663.9185">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="1488" y="663.9185">customer</text><polygon fill="#181818" points="1179.5,694.1172,1169.5,698.1172,1179.5,702.1172,1175.5,698.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1173.5" x2="1443" y1="698.1172" y2="698.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1185.5" y="693.0513">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="1207.5" y="693.0513">customer</text><polygon fill="#181818" points="2135,723.25,2145,727.25,2135,731.25,2139,727.25" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1168.5" x2="2141" y1="727.25" y2="727.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1175.5" y="722.1841">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="1197.5" y="722.1841">repositories()</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="269" x="2147" y="706.1172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="255" x="2154" y="726.1123">:PersistenceContext&lt;persistence&gt;</text><polygon fill="#181818" points="2414,764.5469,2424,768.5469,2414,772.5469,2418,768.5469" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2286.5" x2="2420" y1="768.5469" y2="768.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2293.5" y="763.481">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="2315.5" y="763.481">create</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="226" x="2426" y="747.4141"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="212" x="2433" y="767.4092">:RepositoryFactory&lt;factory&gt;</text><polygon fill="#181818" points="1179.5,805.8438,1169.5,809.8438,1179.5,813.8438,1175.5,809.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1173.5" x2="2280.5" y1="809.8438" y2="809.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1185.5" y="804.7778">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="1207.5" y="804.7778">factory</text><polygon fill="#181818" points="2522,834.9766,2532,838.9766,2522,842.9766,2526,838.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1168.5" x2="2528" y1="838.9766" y2="838.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="1175.5" y="833.9106">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="1198.5" y="833.9106">customers()</text><polygon fill="#181818" points="2734,864.1094,2744,868.1094,2734,872.1094,2738,868.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="2544" x2="2740" y1="868.1094" y2="868.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="2551" y="863.0435">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="41" x="2573" y="863.0435">create</text><polygon fill="#181818" points="1179.5,893.2422,1169.5,897.2422,1179.5,901.2422,1175.5,897.2422" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1173.5" x2="2538" y1="897.2422" y2="897.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1185.5" y="892.1763">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="1207.5" y="892.1763">customerRepository</text><polygon fill="#181818" points="2734,922.375,2744,926.375,2734,930.375,2738,926.375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1168.5" x2="2740" y1="926.375" y2="926.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="1175.5" y="921.3091">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102" x="1196.5" y="921.3091">save(customer)</text><polygon fill="#181818" points="560.5,951.5078,550.5,955.5078,560.5,959.5078,556.5,955.5078" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="554.5" x2="1162.5" y1="955.5078" y2="955.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="566.5" y="950.4419">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="588.5" y="950.4419">confirmation is show to the user</text><polygon fill="#181818" points="76.5,980.6406,66.5,984.6406,76.5,988.6406,72.5,984.6406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="70.5" x2="543.5" y1="984.6406" y2="984.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="82.5" y="979.5747">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207" x="104.5" y="979.5747">confirmation is show to the user</text><!--MD5=[f589929b0f73f99d4a0652f51122acad]
@startuml
autonumber
actor "SalesClerk" as SC

participant  "AddUserUI <presentation>" as SYS
participant ":RegisterCustomerController <application>" as CTRL
participant ":CustomerBuilder<builder>" as CSB
participant ":Customer<Domain>" as CUS
participant ":PersistenceContext<persistence>" as PC
participant ":RepositoryFactory<factory>" as RF
participant ":CustomerRepository" as CR




activate SC
activate SYS

SC-> SYS: Add Customer Option Selected
SYS-> SC: asks customer's information

SC-> SYS: name, VAT, email

SYS-> SC: asks VAT
SC-> SYS: introduces VAT
SYS-> SC: asks email
SC-> SYS: introduces email

alt
SYS-> SC: asks customer's optional information
SC-> SYS: mobile phone number, birthdate, gender, address (billing, shipment)


end alt


SYS-> CTRL : registerCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)
note over CSB: CustomerBuilder cria entidade do tipo Customer num estado válido
activate CTRL
CTRL-> CSB **: create
activate REP
deactivate REP

CTRL-> CSB: setName(name)


note over CTRL, CSB:Set the  rest of the information
note over CUS: domain rules checked here
CTRL-> CSB: createCustomer()
activate CSB
CSB -> CUS : createCustomer(name, VAT, email, mobile, phone number, birthdate, gender, address)
CUS -> CSB: customer

CSB -> CTRL: customer
deactivate CSB

CTRL-> PC**: repositories()
activate PC
PC-> RF**: create
PC-> CTRL: factory
deactivate PC

CTRL-> RF: customers()
activate RF
RF->CR: create

RF->CTRL: customerRepository
deactivate RF
CTRL->CR: save(customer)

deactivate PC
activate CUS

CTRL -> SYS: confirmation is show to the user
deactivate CUS
deactivate CTRL

SYS-> SC: confirmation is show to the user
deactivate SYS
@enduml

PlantUML version 1.2022.4beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>